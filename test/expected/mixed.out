CREATE EXTENSION
SET
DROP TABLE
DROP TABLE
CREATE TABLE
CREATE TABLE
Test 1: Sequential baseline test
INSERT 0 5
CREATE INDEX
 id |                content                 |  score  
----+----------------------------------------+---------
  2 | concurrent programming patterns        | -1.5169
  5 | database indexing strategies           | -0.9580
  1 | database query optimization techniques | -0.8570
  3 | shared memory management systems       |  0.0000
  4 | lock-free data structures              |  0.0000
(5 rows)

Test 2: Concurrent inserts with overlapping terms
INSERT 0 3
 id |                           content                           |  score  
----+-------------------------------------------------------------+---------
  8 | database concurrent processing improves performance         | -1.1341
  6 | database systems require concurrent access control          | -1.0433
  7 | concurrent database operations need careful synchronization | -1.0433
  2 | concurrent programming patterns                             | -0.8026
  5 | database indexing strategies                                | -0.5702
(5 rows)

Test 3: Multiple index creation
INSERT 0 5
CREATE INDEX
 source  | id |                           content                           
---------+----+-------------------------------------------------------------
 Table 1 |  1 | database query optimization techniques
 Table 1 |  2 | concurrent programming patterns
 Table 1 |  3 | shared memory management systems
 Table 1 |  4 | lock-free data structures
 Table 1 |  5 | database indexing strategies
 Table 1 |  6 | database systems require concurrent access control
 Table 1 |  7 | concurrent database operations need careful synchronization
 Table 1 |  8 | database concurrent processing improves performance
 Table 2 |  1 | high priority database tasks
 Table 2 |  2 | concurrent processing systems
 Table 2 |  3 | shared memory data structures
 Table 2 |  4 | database performance optimization
 Table 2 |  5 | concurrent system design patterns
(13 rows)

Test 4: Bulk insert stress test
INSERT 0 50
 total_matches 
---------------
            58
(1 row)

 id |                    content_preview                    |  score  
----+-------------------------------------------------------+---------
  8 | database concurrent processing improves performanc... | -0.1628
  7 | concurrent database operations need careful synchr... | -0.1531
  6 | database systems require concurrent access control... | -0.1531
 10 | test document number 2 contains database and concu... | -0.1369
  9 | test document number 1 contains database and concu... | -0.1369
 11 | test document number 3 contains database and concu... | -0.1369
 12 | test document number 4 contains database and concu... | -0.1369
 13 | test document number 5 contains database and concu... | -0.1369
(8 rows)

Test 5: Mixed insert and search operations
BEGIN
INSERT 0 1
 id |                content                 |  score  
----+----------------------------------------+---------
 59 | new concurrent database research paper | -4.3363
  5 | database indexing strategies           | -0.0796
  1 | database query optimization techniques | -0.0742
(3 rows)

COMMIT
 id |                content                 |  score  
----+----------------------------------------+---------
 59 | new concurrent database research paper | -4.3363
  5 | database indexing strategies           | -0.0796
  1 | database query optimization techniques | -0.0742
(3 rows)

Test 6: Update operations
UPDATE 2
 id |                            content                             |  score  
----+----------------------------------------------------------------+---------
  2 | updated database system with enhanced concurrent features      | -3.5477
  1 | updated database system with enhanced concurrent features      | -3.5477
  5 | database indexing strategies                                   | -0.0768
  8 | database concurrent processing improves performance            | -0.0671
 59 | new concurrent database research paper                         | -0.0671
  6 | database systems require concurrent access control             | -0.0631
  7 | concurrent database operations need careful synchronization    | -0.0631
 15 | test document number 7 contains database and concurrent terms  | -0.0563
 16 | test document number 8 contains database and concurrent terms  | -0.0563
 17 | test document number 9 contains database and concurrent terms  | -0.0563
 18 | test document number 10 contains database and concurrent terms | -0.0563
 19 | test document number 11 contains database and concurrent terms | -0.0563
 20 | test document number 12 contains database and concurrent terms | -0.0563
 21 | test document number 13 contains database and concurrent terms | -0.0563
 22 | test document number 14 contains database and concurrent terms | -0.0563
 23 | test document number 15 contains database and concurrent terms | -0.0563
 24 | test document number 16 contains database and concurrent terms | -0.0563
 25 | test document number 17 contains database and concurrent terms | -0.0563
 26 | test document number 18 contains database and concurrent terms | -0.0563
 27 | test document number 19 contains database and concurrent terms | -0.0563
 28 | test document number 20 contains database and concurrent terms | -0.0563
 29 | test document number 21 contains database and concurrent terms | -0.0563
 30 | test document number 22 contains database and concurrent terms | -0.0563
 31 | test document number 23 contains database and concurrent terms | -0.0563
 32 | test document number 24 contains database and concurrent terms | -0.0563
 33 | test document number 25 contains database and concurrent terms | -0.0563
 34 | test document number 26 contains database and concurrent terms | -0.0563
 35 | test document number 27 contains database and concurrent terms | -0.0563
 36 | test document number 28 contains database and concurrent terms | -0.0563
 37 | test document number 29 contains database and concurrent terms | -0.0563
 38 | test document number 30 contains database and concurrent terms | -0.0563
 39 | test document number 31 contains database and concurrent terms | -0.0563
 40 | test document number 32 contains database and concurrent terms | -0.0563
 41 | test document number 33 contains database and concurrent terms | -0.0563
 42 | test document number 34 contains database and concurrent terms | -0.0563
 43 | test document number 35 contains database and concurrent terms | -0.0563
 44 | test document number 36 contains database and concurrent terms | -0.0563
 45 | test document number 37 contains database and concurrent terms | -0.0563
 46 | test document number 38 contains database and concurrent terms | -0.0563
 47 | test document number 39 contains database and concurrent terms | -0.0563
 48 | test document number 40 contains database and concurrent terms | -0.0563
 49 | test document number 41 contains database and concurrent terms | -0.0563
 50 | test document number 42 contains database and concurrent terms | -0.0563
 51 | test document number 43 contains database and concurrent terms | -0.0563
 52 | test document number 44 contains database and concurrent terms | -0.0563
 53 | test document number 45 contains database and concurrent terms | -0.0563
 55 | test document number 47 contains database and concurrent terms | -0.0563
 56 | test document number 48 contains database and concurrent terms | -0.0563
 57 | test document number 49 contains database and concurrent terms | -0.0563
 58 | test document number 50 contains database and concurrent terms | -0.0563
 54 | test document number 46 contains database and concurrent terms | -0.0563
  9 | test document number 1 contains database and concurrent terms  | -0.0563
 10 | test document number 2 contains database and concurrent terms  | -0.0563
 11 | test document number 3 contains database and concurrent terms  | -0.0563
 12 | test document number 4 contains database and concurrent terms  | -0.0563
 13 | test document number 5 contains database and concurrent terms  | -0.0563
 14 | test document number 6 contains database and concurrent terms  | -0.0563
  3 | shared memory management systems                               |  0.0000
  4 | lock-free data structures                                      |  0.0000
(59 rows)

Test 7: Delete operations
 count_before_delete 
---------------------
                  59
(1 row)

DELETE 10
 count_after_delete 
--------------------
                 49
(1 row)

Test 8: String interning consistency
INSERT 0 3
 id |                            content                             |  score  
----+----------------------------------------------------------------+---------
 60 | exact same terms for testing consistency                       | -3.8184
 61 | exact same terms for testing consistency                       | -3.8184
 62 | testing consistency with exact same terms                      | -3.8184
  9 | test document number 1 contains database and concurrent terms  | -0.1870
 11 | test document number 3 contains database and concurrent terms  | -0.1870
 12 | test document number 4 contains database and concurrent terms  | -0.1870
 13 | test document number 5 contains database and concurrent terms  | -0.1870
 14 | test document number 6 contains database and concurrent terms  | -0.1870
 16 | test document number 8 contains database and concurrent terms  | -0.1870
 17 | test document number 9 contains database and concurrent terms  | -0.1870
 18 | test document number 10 contains database and concurrent terms | -0.1870
 19 | test document number 11 contains database and concurrent terms | -0.1870
 21 | test document number 13 contains database and concurrent terms | -0.1870
 22 | test document number 14 contains database and concurrent terms | -0.1870
 23 | test document number 15 contains database and concurrent terms | -0.1870
 24 | test document number 16 contains database and concurrent terms | -0.1870
 26 | test document number 18 contains database and concurrent terms | -0.1870
 27 | test document number 19 contains database and concurrent terms | -0.1870
 28 | test document number 20 contains database and concurrent terms | -0.1870
 29 | test document number 21 contains database and concurrent terms | -0.1870
 31 | test document number 23 contains database and concurrent terms | -0.1870
 32 | test document number 24 contains database and concurrent terms | -0.1870
 33 | test document number 25 contains database and concurrent terms | -0.1870
 34 | test document number 26 contains database and concurrent terms | -0.1870
 36 | test document number 28 contains database and concurrent terms | -0.1870
 37 | test document number 29 contains database and concurrent terms | -0.1870
 38 | test document number 30 contains database and concurrent terms | -0.1870
 39 | test document number 31 contains database and concurrent terms | -0.1870
 41 | test document number 33 contains database and concurrent terms | -0.1870
 42 | test document number 34 contains database and concurrent terms | -0.1870
 43 | test document number 35 contains database and concurrent terms | -0.1870
 44 | test document number 36 contains database and concurrent terms | -0.1870
 46 | test document number 38 contains database and concurrent terms | -0.1870
 47 | test document number 39 contains database and concurrent terms | -0.1870
 48 | test document number 40 contains database and concurrent terms | -0.1870
 49 | test document number 41 contains database and concurrent terms | -0.1870
 51 | test document number 43 contains database and concurrent terms | -0.1870
 52 | test document number 44 contains database and concurrent terms | -0.1870
 53 | test document number 45 contains database and concurrent terms | -0.1870
 54 | test document number 46 contains database and concurrent terms | -0.1870
 56 | test document number 48 contains database and concurrent terms | -0.1870
 57 | test document number 49 contains database and concurrent terms | -0.1870
 58 | test document number 50 contains database and concurrent terms | -0.1870
  1 | updated database system with enhanced concurrent features      |  0.0000
  2 | updated database system with enhanced concurrent features      |  0.0000
  3 | shared memory management systems                               |  0.0000
  4 | lock-free data structures                                      |  0.0000
  5 | database indexing strategies                                   |  0.0000
  6 | database systems require concurrent access control             |  0.0000
  7 | concurrent database operations need careful synchronization    |  0.0000
  8 | database concurrent processing improves performance            |  0.0000
 59 | new concurrent database research paper                         |  0.0000
(52 rows)

Test 9: Multiple indexes on same table
CREATE TABLE
INSERT 0 3
CREATE INDEX
CREATE INDEX
INSERT 0 2
 id |            content             | english_score 
----+--------------------------------+---------------
  1 | hello world from the test      |       -1.1063
  5 | hello database world           |       -1.1063
  3 | hello from another document    |       -0.5531
  4 | world of databases and indexes |       -0.5531
  2 | the quick brown fox jumps      |        0.0000
(5 rows)

 id |            content             | simple_score 
----+--------------------------------+--------------
  5 | hello database world           |      -1.2393
  1 | hello world from the test      |      -1.0210
  3 | hello from another document    |      -0.5598
  4 | world of databases and indexes |      -0.5105
  2 | the quick brown fox jumps      |       0.0000
(5 rows)

     index_name      | index_size 
---------------------+------------
 multi_idx_test_pkey | 16 kB
 multi_idx_english   | 16 kB
 multi_idx_simple    | 16 kB
(3 rows)

DROP TABLE
Final verification: Index statistics
      table_name       | total_docs | unique_docs 
-----------------------+------------+-------------
 concurrent_test_docs  |         52 |          50
 concurrent_test_docs2 |          5 |           5
(2 rows)

DROP TABLE
DROP TABLE
DROP EXTENSION
