CREATE EXTENSION
SET
SET
SET
DROP TABLE
CREATE TABLE
INSERT 0 5
CREATE INDEX
            bm25vector             
-----------------------------------
 docs_vector_idx:{hello:2,world:1}
(1 row)

     bm25vector     
--------------------
 docs_vector_idx:{}
(1 row)

           to_bm25vector           
-----------------------------------
 docs_vector_idx:{hello:1,world:1}
(1 row)

              to_bm25vector              
-----------------------------------------
 docs_vector_idx:{postgresql:1,search:1}
(1 row)

   to_bm25vector    
--------------------
 docs_vector_idx:{}
(1 row)

                to_bm25vector                 
----------------------------------------------
 docs_vector_idx:{fine:1,hello:1,m:1,world:1}
(1 row)

                 to_bm25vector                  
------------------------------------------------
 docs_vector_idx:{123:1,number:1,test:1,text:1}
(1 row)

 ?column? 
----------
 f
(1 row)

           content           |  score  
-----------------------------+---------
 hello world example         | -2.8453
 the quick brown fox         |  0.0000
 jumped over the lazy dog    |  0.0000
 sphinx of black quartz      |  0.0000
 postgresql full text search |  0.0000
(5 rows)

           content           | postgresql_score | search_score 
-----------------------------+------------------+--------------
 postgresql full text search |          -1.2577 |      -1.2577
 the quick brown fox         |           0.0000 |       0.0000
 jumped over the lazy dog    |           0.0000 |       0.0000
 sphinx of black quartz      |           0.0000 |       0.0000
 hello world example         |           0.0000 |       0.0000
(5 rows)

       to_bm25vector       
---------------------------
 docs_vector_idx:{hello:1}
(1 row)

          to_bm25vector          
---------------------------------
 docs_vector_idx:{test:1,word:1}
(1 row)

                        to_bm25vector                         
--------------------------------------------------------------
 docs_vector_idx:{longer:1,multipl:1,repetit:1,test:3,word:1}
(1 row)

 should_be_true | depends_on_order 
----------------+------------------
 t              | t
(1 row)

 ?column? 
----------
 t
(1 row)

 ?column? 
----------
 t
(1 row)

 id |         content          | relevance 
----+--------------------------+-----------
  1 | the quick brown fox      |   -2.8453
  2 | jumped over the lazy dog |    0.0000
  3 | sphinx of black quartz   |    0.0000
(3 rows)

CREATE INDEX
  query  |         english_stemmed          |               simple_no_stem                
---------+----------------------------------+---------------------------------------------
 running | docs_vector_idx:{run:2,runner:1} | docs_simple_idx:{runner:1,running:1,runs:1}
(1 row)

Testing ORDER BY vs standalone scoring consistency
 id | order_by_score | standalone_score | score_consistency 
----+----------------+------------------+-------------------
  1 |      -1.386294 |        -1.386294 | ✓ SCORES MATCH
  2 |      -1.257669 |        -1.257669 | ✓ SCORES MATCH
  3 |       0.000000 |         0.000000 | ✓ SCORES MATCH
(3 rows)

DROP INDEX
DROP INDEX
DROP TABLE
DROP EXTENSION
