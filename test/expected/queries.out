CREATE EXTENSION
SET
SET
CREATE TABLE
INSERT 0 12
CREATE INDEX
SET
                                QUERY PLAN                                
--------------------------------------------------------------------------
 Limit
   ->  Index Scan using articles_tapir_idx on articles
         Order By: (content <@> 'articles_tapir_idx:database'::bm25query)
(3 rows)

             title             |                                               content                                               |  score  
-------------------------------+-----------------------------------------------------------------------------------------------------+---------
 Data Mining Techniques        | data mining algorithms for pattern discovery and knowledge extraction from large databases          | -1.3220
 Database Optimization         | database indexing and query optimization strategies for improving performance in large datasets     | -1.3220
 Introduction to Databases     | postgresql database management system with advanced indexing capabilities for fast query processing | -1.2651
 Machine Learning Fundamentals | machine learning algorithms and artificial intelligence techniques for data analysis and prediction |  0.0000
 Text Search Algorithms        | full text search with tapir ranking and relevance scoring for information retrieval systems         |  0.0000
(5 rows)

                                    QUERY PLAN                                    
----------------------------------------------------------------------------------
 Limit
   ->  Index Scan using articles_tapir_idx on articles
         Order By: (content <@> 'articles_tapir_idx:machine learning'::bm25query)
(3 rows)

             title             |                                               content                                               |  score  
-------------------------------+-----------------------------------------------------------------------------------------------------+---------
 Machine Learning Fundamentals | machine learning algorithms and artificial intelligence techniques for data analysis and prediction | -3.3220
 Document Classification       | text mining and document classification using machine learning and statistical methods              | -3.3220
 Introduction to Databases     | postgresql database management system with advanced indexing capabilities for fast query processing |  0.0000
(3 rows)

                                    QUERY PLAN                                     
-----------------------------------------------------------------------------------
 Limit
   ->  Index Scan using articles_tapir_idx on articles
         Order By: (content <@> 'articles_tapir_idx:search algorithms'::bm25query)
         Filter: (category = 'technology'::text)
(4 rows)

             title             |                                               content                                               |  score  
-------------------------------+-----------------------------------------------------------------------------------------------------+---------
 Search Engine Design          | search relevance and ranking algorithms with focus on user experience and result quality            | -2.3908
 Data Mining Techniques        | data mining algorithms for pattern discovery and knowledge extraction from large databases          | -1.3220
 Machine Learning Fundamentals | machine learning algorithms and artificial intelligence techniques for data analysis and prediction | -1.3220
 Text Search Algorithms        | full text search with tapir ranking and relevance scoring for information retrieval systems         | -1.0228
 Information Retrieval         | information retrieval and search engines using vector space models and term frequency analysis      | -0.9806
 Introduction to Databases     | postgresql database management system with advanced indexing capabilities for fast query processing |  0.0000
 Natural Language Processing   | natural language processing techniques including parsing stemming and semantic analysis             |  0.0000
 Database Optimization         | database indexing and query optimization strategies for improving performance in large datasets     |  0.0000
 Document Classification       | text mining and document classification using machine learning and statistical methods              |  0.0000
(9 rows)

           title           |                                               content                                               |  score  
---------------------------+-----------------------------------------------------------------------------------------------------+---------
 Search Engine Design      | search relevance and ranking algorithms with focus on user experience and result quality            | -4.3908
 Information Retrieval     | information retrieval and search engines using vector space models and term frequency analysis      | -4.0286
 Document Classification   | text mining and document classification using machine learning and statistical methods              | -1.6610
 Distributed Computing     | distributed systems and scalability challenges in modern cloud computing environments               | -1.3843
 Introduction to Databases | postgresql database management system with advanced indexing capabilities for fast query processing | -1.2651
(5 rows)

                                      QUERY PLAN                                       
---------------------------------------------------------------------------------------
 Limit
   ->  Index Scan using articles_tapir_idx on articles
         Order By: (content <@> 'articles_tapir_idx:database optimization'::bm25query)
(3 rows)

             title             |                                               content                                               |  score  
-------------------------------+-----------------------------------------------------------------------------------------------------+---------
 Database Optimization         | database indexing and query optimization strategies for improving performance in large datasets     | -3.4977
 Data Mining Techniques        | data mining algorithms for pattern discovery and knowledge extraction from large databases          | -1.3220
 Introduction to Databases     | postgresql database management system with advanced indexing capabilities for fast query processing | -1.2651
 Machine Learning Fundamentals | machine learning algorithms and artificial intelligence techniques for data analysis and prediction |  0.0000
 Text Search Algorithms        | full text search with tapir ranking and relevance scoring for information retrieval systems         |  0.0000
 Information Retrieval         | information retrieval and search engines using vector space models and term frequency analysis      |  0.0000
 Natural Language Processing   | natural language processing techniques including parsing stemming and semantic analysis             |  0.0000
 Document Classification       | text mining and document classification using machine learning and statistical methods              |  0.0000
 Search Engine Design          | search relevance and ranking algorithms with focus on user experience and result quality            |  0.0000
 Distributed Computing         | distributed systems and scalability challenges in modern cloud computing environments               |  0.0000
(10 rows)

                                                                                                                        QUERY PLAN                                                                                                                         
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Sort
   Sort Key: (unnest('{database,"machine learning","search algorithms","text mining"}'::text[])), ((a.content <@> to_bm25query((unnest('{database,"machine learning","search algorithms","text mining"}'::text[])), 'articles_tapir_idx'::text))), a.title
   ->  Nested Loop
         ->  Seq Scan on articles a
               Disabled: true
         ->  Materialize
               ->  ProjectSet
                     ->  Result
(8 rows)

Testing ORDER BY vs standalone scoring for multi-term queries
 id |             title             | order_by_score | standalone_score | consistency_check 
----+-------------------------------+----------------+------------------+-------------------
  2 | Machine Learning Fundamentals |      -4.644046 |        -4.644046 | ✓ CONSISTENT
  7 | Document Classification       |      -3.322026 |        -3.322026 | ✓ CONSISTENT
(2 rows)

DROP TABLE
DROP EXTENSION
