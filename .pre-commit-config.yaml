repos:
  - repo: https://github.com/pre-commit/mirrors-clang-format
    rev: 'v18.1.8'
    hooks:
      - id: clang-format
        types: [c]
        files: ^src/.*\.(c|h)$
        args: [--style=file]

  - repo: local
    hooks:
      - id: tapir-format-check
        name: Tapir C Format Check
        entry: clang-format
        language: system
        files: ^src/.*\.(c|h)$
        args: [--dry-run, --Werror]
        pass_filenames: true

  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v4.5.0
    hooks:
      - id: trailing-whitespace
        exclude: (\.patch$|test/expected/.*\.out$|test/sql/.*\.sql$)
      - id: end-of-file-fixer
        exclude: \.patch$
      - id: check-yaml
      - id: check-added-large-files
        args: ['--maxkb=500']
